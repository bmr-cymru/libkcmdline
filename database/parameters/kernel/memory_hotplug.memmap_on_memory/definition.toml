# This is a libKCmdline definition document.

title = "memory_hotplug.memmap_on_memory - definition.toml"
name = "memory_hotplug.memmap_on_memory"
processor = "kernel"
description = '''[KNL,X86,ARM] Boolean flag to enable this feature.
When enabled, runtime hotplugged memory will
allocate its internal metadata (struct pages,
those vmemmap pages cannot be optimized even
if hugetlb_free_vmemmap is enabled) from the
hotadded memory which will allow to hotadd a
lot of memory without requiring additional
memory to do so.
This feature is disabled by default because it
has some implication on large (e.g. GB)
allocations in some configurations (e.g. small
memory blocks).
The state of the flag can be read in
/sys/module/memory_hotplug/parameters/memmap_on_memory.
Note that even when enabled, there are a few cases where
the feature is not effective.
'''

[syntax]
type = "enum"
format = "enum"
choices = ["on", "off (default)"]
allow_empty = true
