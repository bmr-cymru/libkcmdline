# This is a libKCmdline definition document.

title = "libata.force - definition.toml"
name = "libata.force"
processor = "kernel"
description = '''Force configurations.  The format is a comma-
separated list of "[ID:]VAL" where ID is PORT[.DEVICE].
PORT and DEVICE are decimal numbers matching port, link
or device.  Basically, it matches the ATA ID string
printed on console by libata.  If the whole ID part is
omitted, the last PORT and DEVICE values are used.  If
ID hasn't been specified yet, the configuration applies
to all ports, links and devices.

If only DEVICE is omitted, the parameter applies to
the port and all links and devices behind it.  DEVICE
number of 0 either selects the first device or the
first fan-out link behind PMP device.  It does not
select the host link.  DEVICE number of 15 selects the
host link and device attached to it.

The VAL specifies the configuration to force.  As long
as there is no ambiguity, shortcut notation is allowed.
For example, both 1.5 and 1.5G would work for 1.5Gbps.
The following configurations can be forced.

* Cable type: 40c, 80c, short40c, unk, ign or sata.
Any ID with matching PORT is used.

* SATA link speed limit: 1.5Gbps or 3.0Gbps.

* Transfer mode: pio[0-7], mwdma[0-4] and udma[0-7].
udma[/][16,25,33,44,66,100,133] notation is also
allowed.

* nohrst, nosrst, norst: suppress hard, soft and both
resets.

* rstonce: only attempt one reset during hot-unplug
link recovery.

* [no]dbdelay: Enable or disable the extra 200ms delay
before debouncing a link PHY and device presence
detection.

* [no]ncq: Turn on or off NCQ.

* [no]ncqtrim: Enable or disable queued DSM TRIM.

* [no]ncqati: Enable or disable NCQ trim on ATI chipset.

* [no]trim: Enable or disable (unqueued) TRIM.

* trim_zero: Indicate that TRIM command zeroes data.

* max_trim_128m: Set 128M maximum trim size limit.

* [no]dma: Turn on or off DMA transfers.

* atapi_dmadir: Enable ATAPI DMADIR bridge support.

* atapi_mod16_dma: Enable the use of ATAPI DMA for
commands that are not a multiple of 16 bytes.

* [no]dmalog: Enable or disable the use of the
READ LOG DMA EXT command to access logs.

* [no]iddevlog: Enable or disable access to the
identify device data log.

* [no]logdir: Enable or disable access to the general
purpose log directory.

* max_sec_128: Set transfer size limit to 128 sectors.

* max_sec_1024: Set or clear transfer size limit to
1024 sectors.

* max_sec_lba48: Set or clear transfer size limit to
65535 sectors.

* external: Mark port as external (hotplug-capable).

* [no]lpm: Enable or disable link power management.

* [no]setxfer: Indicate if transfer speed mode setting
should be skipped.

* [no]fua: Disable or enable FUA (Force Unit Access)
support for devices supporting this feature.

* dump_id: Dump IDENTIFY data.

* disable: Disable this device.

If there are multiple matching configurations changing
the same attribute, the last one is used.
'''

[syntax]
type = "flag"
format = "flag"
choices = []
allow_empty = true
